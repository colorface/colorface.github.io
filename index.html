<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=" />






<meta name="description" content="点点滴滴，记录累积！">
<meta property="og:type" content="website">
<meta property="og:title" content="伊水贝">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="伊水贝">
<meta property="og:description" content="点点滴滴，记录累积！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="伊水贝">
<meta name="twitter:description" content="点点滴滴，记录累积！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>伊水贝</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">伊水贝</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/29/Private-Pods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/29/Private-Pods/" itemprop="url">Private Pods</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-29T12:01:42+08:00">
                2018-12-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/12/29/Private-Pods/" class="leancloud_visitors" data-flag-title="Private Pods">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Private-Pods"><a href="#Private-Pods" class="headerlink" title="Private Pods"></a>Private Pods</h1><h2 id="1-Create-a-Private-Spec-Repo-（创建私有-Spec-仓库）"><a href="#1-Create-a-Private-Spec-Repo-（创建私有-Spec-仓库）" class="headerlink" title="1.Create a Private Spec Repo （创建私有 Spec 仓库）"></a>1.Create a Private Spec Repo （创建私有 Spec 仓库）</h2><p>例子： 在 Coding 上新建项目 CCSpecs，<br>私有Spec仓库地址<code>https://git.coding.net/colorface/CCSpecs.git</code></p>
<h2 id="2-Add-your-Private-Repo-to-your-CocoaPods-installation"><a href="#2-Add-your-Private-Repo-to-your-CocoaPods-installation" class="headerlink" title="2.Add your Private Repo to your CocoaPods installation"></a>2.Add your Private Repo to your CocoaPods installation</h2><ul>
<li>拉取 Pod 仓库到本地:</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod repo <span class="keyword">add</span><span class="bash"> REPO_NAME SOURCE_URL</span></div></pre></td></tr></table></figure>
<ul>
<li><p>To check if your installation is successful and ready to go:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/.cocoapods/repos/REPO_NAME</span></div><div class="line"><span class="meta">$</span><span class="bash"> pod repo lint .</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-创建私有-Pod-工程文件"><a href="#3-创建私有-Pod-工程文件" class="headerlink" title="3.创建私有 Pod 工程文件"></a>3.创建私有 Pod 工程文件</h2><ul>
<li><p>在 Coding 上新建项目用于存放私有 Pod 工程源码，本地创建工程文件，添加至 git 管理并 push 到远端仓库。</p>
<ul>
<li>在工程根目录下执行命令，建立本地工程和远程仓库的关联</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote <span class="keyword">add</span><span class="bash"> origin SOURCE_URL</span></div></pre></td></tr></table></figure>
<ul>
<li>本地工程push到远程仓库</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git add .</span></div><div class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"修改信息"</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> git push -u origin master</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 组件化开发时，我们希望某些基础模块的内容是稳定的，不会经常变更。</span></div><div class="line"><span class="meta">#</span><span class="bash"> 基础模块开发稳定后需要打 tag，保证主工程的开发过程中不会因为子工程的变更而变化。</span></div><div class="line"><span class="meta">#</span><span class="bash"> 这里我们在工程上打 tag 并 push 到远程仓库。</span></div><div class="line"></div><div class="line"><span class="meta">$</span><span class="bash"> git tag 0.0.1</span></div><div class="line"><span class="meta">$</span><span class="bash"> git push --tags</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-创建私有-Pod-的-podspec"><a href="#4-创建私有-Pod-的-podspec" class="headerlink" title="4. 创建私有 Pod 的 podspec"></a>4. 创建私有 Pod 的 podspec</h2><ul>
<li>在工程的根目录下执行：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> pod spec create xxx</span></div><div class="line"><span class="meta">#</span><span class="bash"> xxx为工程名，创建成功后会在根目录下创建 xxx.podspec 文件</span></div></pre></td></tr></table></figure>
<ul>
<li>根据实际情况配置<code>podspec</code>文件</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/721001-d95ed7ac380f3ffe.png?imageMogr2/auto-orient/" alt="根据实际情况配置"></p>
<ul>
<li><p>验证 podspec 文件有效性:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ pod <span class="class"><span class="keyword">lib</span> <span class="title">lint</span></span></div><div class="line"></div><div class="line">$ pod spec lint</div><div class="line"></div><div class="line"><span class="comment"># 都验证通过后，podspec 文件配置成功。</span></div><div class="line"><span class="comment"># 可选参数 --verbose   --allow-warnings</span></div></pre></td></tr></table></figure>
</li>
<li><p>提交 podspec 至私有 Spec 仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> pod repo push REPO_NAME SPEC_NAME.podspec</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Your-private-Pod-is-ready-to-be-used-in-a-Podfile-You-can-use-the-spec-repository-with-the-source-directive-in-your-Podfile-as-shown-in-the-following-example"><a href="#Your-private-Pod-is-ready-to-be-used-in-a-Podfile-You-can-use-the-spec-repository-with-the-source-directive-in-your-Podfile-as-shown-in-the-following-example" class="headerlink" title="Your private Pod is ready to be used in a Podfile. You can use the spec repository with the source directive in your Podfile as shown in the following example:"></a>Your private Pod is ready to be used in a Podfile. You can use the spec repository with the source directive in your Podfile as shown in the following example:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> <span class="string">'URL_TO_REPOSITORY'</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/14/Effective-Objective-2-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/14/Effective-Objective-2-0/" itemprop="url">Effective Objective 2.0</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-14T12:10:51+08:00">
                2018-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/12/14/Effective-Objective-2-0/" class="leancloud_visitors" data-flag-title="Effective Objective 2.0">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Effective-Objective-2-0"><a href="#Effective-Objective-2-0" class="headerlink" title="Effective Objective 2.0"></a>Effective Objective 2.0</h1><p>(编写高质量iOS与OS X代码的52个有效方法)</p>
<h2 id="1-runtime-："><a href="#1-runtime-：" class="headerlink" title="1. runtime ："></a>1. runtime ：</h2><ul>
<li>消息机制</li>
<li>消息转发</li>
</ul>
<h2 id="2-在类的头文件中尽量少引入其他头文件"><a href="#2-在类的头文件中尽量少引入其他头文件" class="headerlink" title="2. 在类的头文件中尽量少引入其他头文件"></a>2. 在类的头文件中尽量少引入其他头文件</h2><ul>
<li>减少编译时间，降低</li>
<li>使用import而非include指令不会导致循环引用，但两个类里有一个无法被正确编译，建议使用@class 向前声明</li>
<li>有些协议，例如委托协议（delegate protocol）不用单独写一个头文件</li>
<li>协议单独写.h.m文件，或者在委托协议里声明协议，</li>
<li>一般遵循协议，建议写在扩展分类后边(代理对象的扩展分类),向外界隐藏实现</li>
</ul>
<h2 id="3-多用字面量语法，少用与之等价的方法"><a href="#3-多用字面量语法，少用与之等价的方法" class="headerlink" title="3. 多用字面量语法，少用与之等价的方法"></a>3. 多用字面量语法，少用与之等价的方法</h2><ul>
<li>字面量语法创建数组或者字典时，若值中有nil，则会抛出异常</li>
</ul>
<h2 id="4-多用类型常量，少用-define预处理指令"><a href="#4-多用类型常量，少用-define预处理指令" class="headerlink" title="4. 多用类型常量，少用#define预处理指令"></a>4. 多用类型常量，少用#define预处理指令</h2><ul>
<li>不要用预处理指令代替常量，不含类型信息，并且不安全<br>用 <code>static const NSTimeinterval kAnimationDuration = 0.3;</code> 代替<br>  <code>_#define ANIMATION_DURATION 0.3</code></li>
<li>OC 没有“名称空间”（namespace）这一概念</li>
<li>若常量局限于实现文件之内，则在前面加字母k，若常量在类之外可见，则通常以类名为前缀</li>
<li>定义常量的位置很重要。</li>
<li>在头文件中使用extern来声明全局常量，并在相关实现文件中定义其值，这种常量为全局常量，会出现在全局符号表中，其名称应添加类名前缀<br>也可以单独定义.h.m文件用来声明所有的全局常量。</li>
</ul>
<h2 id="5-用枚举表示状态、选项、状态码"><a href="#5-用枚举表示状态、选项、状态码" class="headerlink" title="5. 用枚举表示状态、选项、状态码"></a>5. 用枚举表示状态、选项、状态码</h2><ul>
<li>&lt;&lt; 左移运算符</li>
<li><p>宏为完全替代操作 </p>
<p>   _#define NS_ENUM(_type, _name) enum _name : _type _name;     enum _name : _type</p>
<p>  typedef enum EOCConnectionState : NSUInteger EOCConnectionState;<br>  enum EOCConnectionState :  NSUInterger {</p>
<p>  };</p>
</li>
</ul>
<h2 id="6-理解”属性”这一概念"><a href="#6-理解”属性”这一概念" class="headerlink" title="6. 理解”属性”这一概念"></a>6. 理解”属性”这一概念</h2><ul>
<li>属性是封装数据的方式。</li>
<li>OC 把实例变量当做一种存储偏移量所用的“特殊变量”，交由类对象（class object）保管</li>
<li>autosynthesis 自动合成这个过程有编译器在编译器执行</li>
<li>@porperty 关键字告诉编译器需要自动合成setter和getter方法，并生成相应的实例变量</li>
<li>@synthesize 关键字一般不用写，如果重写了setter和getter方法，需要指明需要合成的实例变量，单个重写setter 或 getter方法不需要写</li>
<li>@dynamic 关键字，它会告诉编译器： 不要自动创建实例变量，也不要创建setter和getter方法</li>
<li><p>@dynamic 需要和预先准备的实例变量进行绑定（赋值），需要手动合成setter和getter方法，运行时如果没有存取方法，直接报错</p>
</li>
<li><p>内存管理语义</p>
<ul>
<li>assign： 简单赋值操作</li>
<li>strong： 设置方法会先保留新值，并释放旧值，然后再设置新值</li>
<li>weak    ： 设置方法既不保留新值，也不释放旧值，特质同assign，在属性所指向的对象被废弃时，属性值清空</li>
<li>unsafe_unretained ： 特质同assign，但是用于对象类型（object type）</li>
<li>copy     ： 类似于strong特质，但设置方法并不保留新值，保留的是新值的copy</li>
</ul>
</li>
<li><p>MRC</p>
  <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">* <span class="keyword">strong</span> 修饰:</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		[obj <span class="keyword">retain</span>];					<span class="comment">// 保留新值</span></div><div class="line">		[_obj release];					<span class="comment">// 释放旧值</span></div><div class="line">		_obj = obj;						<span class="comment">// 设置新值</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">*  <span class="keyword">weak</span> 修饰:</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		_obj = obj;						<span class="comment">// 不保留新值，不释放旧值，直接设置</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">*  <span class="keyword">copy</span> 修饰</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		[_obj release];					<span class="comment">// 释放旧值</span></div><div class="line">		_obj = [obj <span class="keyword">copy</span>];				<span class="comment">// 设置新值copy</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>ARC</p>
  <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">*  <span class="keyword">strong</span> 修饰 :</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		_obj = obj;						<span class="comment">// 设置新值</span></div><div class="line">	&#125;					</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">*  <span class="keyword">weak</span> 修饰:</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		_obj = obj;						<span class="comment">// 不保留新值，不释放旧值，直接设置新值</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">*  <span class="keyword">copy</span> 修饰:</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setObject:(<span class="built_in">NSObject</span> *)obj &#123;</div><div class="line">	<span class="keyword">if</span>(_obj != obj) &#123;</div><div class="line">		_obj = [obj <span class="keyword">copy</span>];				<span class="comment">// 设置新值copy</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-在对象内部尽量直接访问实例变量"><a href="#7-在对象内部尽量直接访问实例变量" class="headerlink" title="7. 在对象内部尽量直接访问实例变量"></a>7. 在对象内部尽量直接访问实例变量</h2><ul>
<li>在写入实例变量时，通过其设置方法来做，而在读取实例变量时，则直接使用实例变量</li>
<li>在初始化方法及dealloc方法中应该直接访问实例变量</li>
<li>惰性初始化需要通过属性来读取数据</li>
</ul>
<h2 id="8-理解“对象等同性”这一概念"><a href="#8-理解“对象等同性”这一概念" class="headerlink" title="8. 理解“对象等同性”这一概念"></a>8. 理解“对象等同性”这一概念</h2><ul>
<li>相同的对象必须具有相同的哈希码，但两个哈希码相同的对象却未必相同</li>
<li>NSString isEqualToString</li>
<li>NSArray  isqualToArray</li>
<li>NSDictionary isEqualToDictionary</li>
</ul>
<h2 id="9-以“类簇模式”隐藏实现细节"><a href="#9-以“类簇模式”隐藏实现细节" class="headerlink" title="9. 以“类簇模式”隐藏实现细节"></a>9. 以“类簇模式”隐藏实现细节</h2><ul>
<li>工厂模式（factory pattern）是创建类族的办法之一</li>
<li>系统框架中有许多类族，大部分collection类都是类族，NSArray，NSMutableArray</li>
<li>类族模式可以把实现细节隐藏在一套简单的公共接口后面</li>
<li>判断类族不能用isMemberOfClass, 也不能能 = ，需要用isKindOfClass</li>
</ul>
<h2 id="10-在既有类中使用关联对象存放自定义数据"><a href="#10-在既有类中使用关联对象存放自定义数据" class="headerlink" title="10. 在既有类中使用关联对象存放自定义数据"></a>10. 在既有类中使用关联对象存放自定义数据</h2><ul>
<li>设置关联对象值时，若想令两个键匹配到同一个值，则二者必须完全相同的指针才行</li>
<li>在设置关联对象的值时，必须使用静态全局变量做键</li>
<li>可以通过“关联对象”机制把两个对象连起来</li>
<li>定义关联对象时刻指定内存管理语义，用以模仿定义属性时所采用的“拥有关系”和“非拥有关系”</li>
<li>block绑定对象，使代码不分散 例如：alertView 代理 绑定block</li>
</ul>
<h2 id="11-理解objc-msgSend的作用"><a href="#11-理解objc-msgSend的作用" class="headerlink" title="11. 理解objc_msgSend的作用"></a>11. 理解objc_msgSend的作用</h2><ul>
<li>OC中，向某对象传递消息，使用动态绑定机制来决定需要调用的方法，在底层，所有方法都是普通的c语言函数</li>
<li>消息由接收者，选择子及参数构成</li>
<li>向对象发消息，由<strong>动态消息派发系统</strong>来处理,该系统会查出相应的方法，并执行</li>
</ul>
<h2 id="12-理解消息转发机制"><a href="#12-理解消息转发机制" class="headerlink" title="12. 理解消息转发机制"></a>12. 理解消息转发机制</h2><ul>
<li>动态方法解析（dynamic method resolution） 先征询接收者所属的类，是否能动态添加方法，以处理当前<br>未知的选择子 <code>+(BOOL) resolveInstanceMethod:(SEL)selector</code> or<br><code>+(BOOL) resolveClassMethod:(SEL)selector</code></li>
<li>备援接收者 <code>- （id）forwardingTargetForSelector:(SEL)selector</code></li>
<li>完整的消息转发<code>- (void)forwardInvocation:(NSInvocation *)invocation</code></li>
<li>如若还不能处理，抛出异常 <code>doesNotRecognizeSelector</code></li>
<li>搭配@dynamic</li>
</ul>
<h2 id="13-用“方法调配技术”调试“黑盒方法”"><a href="#13-用“方法调配技术”调试“黑盒方法”" class="headerlink" title="13. 用“方法调配技术”调试“黑盒方法”"></a>13. 用“方法调配技术”调试“黑盒方法”</h2><ul>
<li>开发者可以为那些“完全不知道具体实现的”(完全不透明)黑盒方法增加日志记录功能</li>
<li>此方法在调试程序时非常有用，向原有实现中添加新功能</li>
</ul>
<h2 id="14-理解“类对象”的用意"><a href="#14-理解“类对象”的用意" class="headerlink" title="14. 理解“类对象”的用意"></a>14. 理解“类对象”的用意</h2><ul>
<li>每个类仅有一个“类对象”，而每个“类对象”仅有一个与之相关的“元类”</li>
<li>在运行期检查对象的类型，这一操作也叫“类型信息查询”（introspection,”内省”）</li>
<li>如果对象类型无法再编译期确定，那么就应该使用类型信息查询方法来探知</li>
<li>isMemberOfClass 能够判断出对象是否某个特定类的实例</li>
<li>isKindOfClass  能够判断出对象是某类或其派生类的实例</li>
<li>每个实例都有一个指向class对象的指针，用以表明其类型，而这些class对象构成了类的继承体系</li>
</ul>
<h2 id="15-用前缀避免命名空间冲突"><a href="#15-用前缀避免命名空间冲突" class="headerlink" title="15. 用前缀避免命名空间冲突"></a>15. 用前缀避免命名空间冲突</h2><ul>
<li>OC 没有命名空间</li>
<li>不仅是类名，项目中所有名称都应加前缀，包括分类及分类方法也需要加前缀</li>
<li>实现文件中若存在c函数，也应该加前缀</li>
</ul>
<h2 id="16-提供全能初始化方法"><a href="#16-提供全能初始化方法" class="headerlink" title="16. 提供全能初始化方法"></a>16. 提供全能初始化方法</h2><ul>
<li>在类中提供一个全能初始化方法，并于文档里指明，其他初始化方法均应调用此方法</li>
</ul>
<h2 id="17-实现description方法"><a href="#17-实现description方法" class="headerlink" title="17. 实现description方法"></a>17. 实现description方法</h2><ul>
<li>可以在description中输出很多互不相同的信息，那就是借助NSDictionary类的sescription方法，直接把需要的数据包装成字典</li>
</ul>
<h2 id="18-尽量使用不可变字符串"><a href="#18-尽量使用不可变字符串" class="headerlink" title="18. 尽量使用不可变字符串"></a>18. 尽量使用不可变字符串</h2><ul>
<li>尽量创建不可变的对象</li>
<li>若某属性仅用于对象内部修改，则在扩展分类中将其readonly属性扩展为readwrite属性</li>
<li>不要把可变的collection作为属性公开，而应提供相关方法，以此修改对象中的可变collection</li>
</ul>
<h2 id="19-使用清晰而协调的命名方式"><a href="#19-使用清晰而协调的命名方式" class="headerlink" title="19. 使用清晰而协调的命名方式"></a>19. 使用清晰而协调的命名方式</h2><ul>
<li>如果方法的返回值是新创建的，那么方法名的首个词应是返回值的类型</li>
<li>应该把表示参数类型的名词放在参数前边</li>
<li>不要使用str这种简称，应使用string这样的全称</li>
</ul>
<h2 id="20-为私有方法名前加前缀"><a href="#20-为私有方法名前加前缀" class="headerlink" title="20. 为私有方法名前加前缀"></a>20. 为私有方法名前加前缀</h2><ul>
<li>给私有方法的民称前加前缀，这样可以很容易将其同公共方法区分开</li>
<li>不要单用一个下划线做私有方法的前缀，因为这种方法是预留给苹果</li>
</ul>
<h2 id="21-理解Objective-C-错误模型"><a href="#21-理解Objective-C-错误模型" class="headerlink" title="21. 理解Objective-C 错误模型"></a>21. 理解Objective-C 错误模型</h2><ul>
<li>只有发生了可使整个程序崩溃的严重错误时，才应使用异常</li>
<li>把错误信息放在NSError里，经由“输出参数”返回给调用者</li>
</ul>
<h2 id="22-理解NSCopying协议"><a href="#22-理解NSCopying协议" class="headerlink" title="22. 理解NSCopying协议"></a>22. 理解NSCopying协议</h2><ul>
<li>若想令自己缩写的对象具有拷贝功能，则需实现NSCopying协议</li>
<li><code>- (id)copyWithZone:(NSZone *)zone</code></li>
<li>复制对象时需决定采用浅拷贝还是深拷贝，一般情况下应尽量执行浅拷贝</li>
<li>深拷贝的意思是：在拷贝对象自身时，将其底层数据也一并复制过去。</li>
<li>Foundation框架中的所有collection类在默认情况下都执行的浅拷贝，也就是说，只拷贝容器对象本身，而不复制其中数据</li>
</ul>
<h2 id="23-通过委托与数据源协议进行对象间通信"><a href="#23-通过委托与数据源协议进行对象间通信" class="headerlink" title="23. 通过委托与数据源协议进行对象间通信"></a>23. 通过委托与数据源协议进行对象间通信</h2><ul>
<li>委托模式 可以将数据与业务逻辑解耦</li>
<li>注意使用weak属性，声明非拥有关系，因为代理对象一般会强引用委托者，否则容易形成保留环</li>
<li>协议中使用可选方法时，需要判断是否响应此方法</li>
<li>委托模式：数据源模式 （Data Source pattern） 和 常规委托模式 （delegate pattern）</li>
<li>数据源模式：信息从数据源流向类  Data Source —&gt; Class   栗子：UITableViewDataSource</li>
<li>常规委托模式: 信息从类流向受委托者(delegate) class —&gt; Delegate 栗子： UITableViewDelegate</li>
<li>非正式协议，给NSObject 类增加分类的方法</li>
<li><p>delegate 只是一个保存某个代理对象的地址，如果设置多个代理相当于重新赋值，只有最后一个设置的代理才会被真正赋值</p>
<ul>
<li>单例最好不要使用delegate,单例对象始终都只有同一个对象</li>
</ul>
</li>
<li><p>delegate 和 block 如何选择：</p>
<ul>
<li>多条消息需要传递，选用delegate，</li>
<li>一个委托对象的代理属性只能有一个代理对象时</li>
<li>delegare 更加面向过程， block更加面向结果</li>
<li>性能上来说，block的性能消耗要略大于delegate，block会涉及栈区向堆区拷贝等操作，时间和空间上的消耗都大于代理</li>
</ul>
</li>
</ul>
<h2 id="24-将类的实现代码分散在便于管理的数个分类之中"><a href="#24-将类的实现代码分散在便于管理的数个分类之中" class="headerlink" title="24. 将类的实现代码分散在便于管理的数个分类之中"></a>24. 将类的实现代码分散在便于管理的数个分类之中</h2><ul>
<li>使用分类机制把类的实现代码划分成易于管理的小块</li>
<li>将应该视为“私有”的方法归入名为Private的分类中，以隐藏实现细节</li>
</ul>
<h2 id="25-总是为第三方类的分类名称加前缀"><a href="#25-总是为第三方类的分类名称加前缀" class="headerlink" title="25. 总是为第三方类的分类名称加前缀"></a>25. 总是为第三方类的分类名称加前缀</h2><ul>
<li>向第三方类中添加分类时，总应给其名称加上你专用的前缀</li>
<li>向第三方类中添加分类时，总应给其中的方法名加上你专用的前缀</li>
</ul>
<h2 id="26-勿在分类中声明属性"><a href="#26-勿在分类中声明属性" class="headerlink" title="26. 勿在分类中声明属性"></a>26. 勿在分类中声明属性</h2><ul>
<li>class-continuation 分类，也叫扩展分类可以直接添加属性，但常规分类不会生成实例变量及存取方法</li>
<li>使用关联对象可以给分类添加属性</li>
<li>把封装数据所用的全部属性都定义在主接口里</li>
<li>在扩展分类之外的其他分类中，可以定义存取方法，但尽量不要定义属性</li>
</ul>
<h2 id="27-使用“class-continuation分类”隐藏实现细节"><a href="#27-使用“class-continuation分类”隐藏实现细节" class="headerlink" title="27. 使用“class-continuation分类”隐藏实现细节"></a>27. 使用“class-continuation分类”隐藏实现细节</h2><ul>
<li>OC的动态消息系统的工作方式决定了其不可能实现真正的私有方法或私有私立变量</li>
<li>扩展分类时唯一能声明实例变量的分类</li>
<li>实现文件中定义协议，分类中遵循协议，仅自己用到时</li>
<li>.h文件声明为readonly，.m扩展分类修改为readwrite</li>
<li>一般在扩展分类声明类遵循的协议，便于隐藏</li>
<li>协议分委托协议和普通协议，委托协议需要分情况，在需要使用的类前声明 or 提取出来(为更多类使用)</li>
</ul>
<h2 id="28-通过协议提供匿名对象"><a href="#28-通过协议提供匿名对象" class="headerlink" title="28. 通过协议提供匿名对象"></a>28. <em>通过协议提供匿名对象</em></h2><ul>
<li>协议可在某种程度上提供匿名类型，具体的对象类型可以淡化为遵从某协议的id类型，协议里规定了对象所应实现的方法</li>
<li>使用匿名对象来隐藏类型名称（或类名）</li>
<li>如果具体类型不重要，重要的是对象能够响应(定义在协议里的)特定方法，那么可使用匿名对象来表示</li>
</ul>
<h2 id="29-理解引用计数"><a href="#29-理解引用计数" class="headerlink" title="29. 理解引用计数"></a>29. 理解引用计数</h2><ul>
<li><p>属性存取方法中的内存管理</p>
<ul>
<li>三个方法用于操作计数器：<strong>Retain</strong> 递增  <strong>release</strong> 递减 <strong>autorelease</strong> 带稍后清理“自动释放池”时，再递减保留计数</li>
<li>野指针，悬垂指针（oc中）： 指针指向的对象已经被释放了</li>
<li>僵尸对象：一个已经被释放的对象，但是这个对象所占用的空间还没有分配给别人，这样的对象叫做僵尸对象</li>
<li>autorelease释放时机：当前线程的下一次事件循环。因为自动释放池中的释放操作要等到下一次事件循环时才会执行</li>
</ul>
</li>
</ul>
<h2 id="30-以ARC简化引用计数"><a href="#30-以ARC简化引用计数" class="headerlink" title="30. 以ARC简化引用计数"></a>30. <em>以ARC简化引用计数</em></h2><ul>
<li>ARC管理对象生命期的办法基本上就是：在合适的地方插入”保留”及”释放”操作</li>
<li>在ARC环境中，变量的内存管理语义可以通过修饰符指明</li>
<li>ARC只负责OC对象的内存，CoreFoundation框架是C语言接口，不归ARC管理，开发者必须适时调用CFReatin/CFRelease</li>
</ul>
<h2 id="31-在dealloc方法中只释放引用并解除监听"><a href="#31-在dealloc方法中只释放引用并解除监听" class="headerlink" title="31. 在dealloc方法中只释放引用并解除监听"></a>31. 在dealloc方法中只释放引用并解除监听</h2><ul>
<li>在dealloc方法里，应该做得事情就是释放指向其他对象的引用，并取消原来订阅的“键值观察(KVO)”或NSNotificationCenter等通知，不要做其他事情</li>
<li>如果对象持有文件描述符等系统资源，那么应该专门编写一个方法来释放此种资源。这样的类要和其使用者约定：用完资源后必须调用close方法</li>
<li>执行异步任务的方法不应再dealloc里调用；只能在正常状态下执行的那些方法也不应在dealloc里调用，因为此时对象已处于正在回收的状态了</li>
</ul>
<h2 id="32-编写“异常安全代码”时留意内存管理问题"><a href="#32-编写“异常安全代码”时留意内存管理问题" class="headerlink" title="32. 编写“异常安全代码”时留意内存管理问题"></a>32. 编写“异常安全代码”时留意内存管理问题</h2><h2 id="33-以弱引用避免保留环"><a href="#33-以弱引用避免保留环" class="headerlink" title="33. 以弱引用避免保留环"></a>33. 以弱引用避免保留环</h2><ul>
<li>将某些引用设为weak，可避免出席那“保留环”</li>
<li>weak引用可以自动清空</li>
</ul>
<h2 id="34-以“自动释放池块”降低内存峰值"><a href="#34-以“自动释放池块”降低内存峰值" class="headerlink" title="34. 以“自动释放池块”降低内存峰值"></a>34. 以“自动释放池块”降低内存峰值</h2><ul>
<li>主线程和GCD线程，这些线程默认都有自动释放池，每次执行“事件循环(event loop)”时，就将其清空</li>
<li>自动释放池嵌套用的好处是，可以借此控制应用程序的内存峰值</li>
<li>自动释放池要等到线程执行下一次事件循环时才会清空</li>
<li>尽管自动释放池的开销不太大，但毕竟还是有的，所以尽量不要建立额外的自动释放池</li>
<li>@autoreleasepool这种写法能创建更为轻便的自动释放池</li>
</ul>
<h2 id="35-用“僵尸对象”调试内存管理问题"><a href="#35-用“僵尸对象”调试内存管理问题" class="headerlink" title="35. 用“僵尸对象”调试内存管理问题"></a>35. 用“僵尸对象”调试内存管理问题</h2><ul>
<li>系统在回收对象时，可以不将其真的回收，而是把它转化为僵尸对象。通过环境变量NSZombieEnabled可开启此功能。</li>
<li>系统会修改对象的isa指针，另其指向特殊的僵尸类，从而使该对象变为僵尸对象。</li>
<li>僵尸对象能够响应所有的选择子，响应方式为：打印一条包括消息内容及其接受者的消息，然后终止应用程序。</li>
<li>dealloc方法调配（swizzle）成会检测僵尸对象的版本</li>
<li><em>NSZombie</em>类（以及所有从该类拷贝出来的类）并未实现任何方法。此类没有超类，因此和NSObject一样，也是个”根类”，该类只有一个实例变量，叫做isa</li>
</ul>
<h2 id="36-不要使用retainCount"><a href="#36-不要使用retainCount" class="headerlink" title="36. 不要使用retainCount"></a>36. 不要使用retainCount</h2><ul>
<li>ARC之后，retainCount方法就正式废止了</li>
<li>任何给定时间点上的“绝对保留计数”都无法反映对象生命期的全貌</li>
<li>单例对象保留计数很大</li>
</ul>
<h2 id="37-理解“块”这一概念"><a href="#37-理解“块”这一概念" class="headerlink" title="37. 理解“块”这一概念"></a>37. 理解“块”这一概念</h2><ul>
<li>块 极为有用，开发者可将代码像对象一样传递，并且在定义“块”的范围内，它可以访问到其中的全部变量</li>
<li>块的强大之处：在声明它的范围里，所有变量都可以为其所捕获</li>
<li>如果快所捕获的变量是对象类型，那么会自动保留它</li>
<li>快总能修改实例变量，所以在声明时无须加__block</li>
<li>块可以分配在栈上或堆上，也可以是全局的</li>
<li>块可接受参数，也可返回值</li>
<li>块是对象</li>
</ul>
<h2 id="38-为常用的块类型创建typedef"><a href="#38-为常用的块类型创建typedef" class="headerlink" title="38. 为常用的块类型创建typedef"></a>38. 为常用的块类型创建typedef</h2><ul>
<li>定义新类型时应遵从现有的命名习惯，勿使其名称与别的类型相冲突</li>
<li>不妨为同一个块签名定义多个类型别名。如果要重构的代码使用了块类型的某个别名，那么只需修改相应typedef中的块签名即可，无须改动其他typedef</li>
</ul>
<h2 id="39-用handler块降低代码分散程度"><a href="#39-用handler块降低代码分散程度" class="headerlink" title="39. 用handler块降低代码分散程度"></a>39. 用handler块降低代码分散程度</h2><ul>
<li>设计API时如果用到了handler块，那么可以增加一个参数，使调用者可通过此参数来决定应该把块安排在哪个队列上执行</li>
<li>在创建对象时，可以使用内联的handler块将相关的业务逻辑一并声明</li>
<li>在有多个实例需要监控时，如果采用委托模式，那么经常需要根据传入的对象来切换，若改用handler块来实现，则可直接将块和相关对象放在一起</li>
<li>常见用法：分类里声明块属性，公共接口里作为参数，传值给属性，注意块的释放时机，一次性操作可在执行完成后释放，或可在对象释放时释放，避免循环引用</li>
</ul>
<h2 id="40-用块引用其所属对象时不要出现保留环"><a href="#40-用块引用其所属对象时不要出现保留环" class="headerlink" title="40. 用块引用其所属对象时不要出现保留环"></a>40. 用块引用其所属对象时不要出现保留环</h2><ul>
<li>如果块所捕获的对象直接或间接的保留了块本身，那么就得当心保留环的问题</li>
<li>一定要找个适当的时机解除保留环，而不能把责任推给API的调用者</li>
<li>常见错误用法：<ul>
<li>A类把块作为属性，但在B类使用时，在某个方法中直接临时生成A对象并调用块，</li>
<li>虽然编译器会复制块到堆中，但在块内代码执行完成后会释放，</li>
<li>建议B类保留A对象，用weakself避免保留环，或者B类中创建个数组，把A对象保留中，在dealloc方法中，清理数组内容</li>
<li>B对象 –&gt; block –&gt; A对象 –&gt;B对象</li>
</ul>
</li>
</ul>
<h2 id="41-多用派发队列，少用同步锁"><a href="#41-多用派发队列，少用同步锁" class="headerlink" title="41. 多用派发队列，少用同步锁"></a>41. <strong>多用派发队列，少用同步锁</strong></h2><ul>
<li>派发队列可用来表述同步语义（synchronization semantic)(为代码加锁),这种做法要比使用@synchronized块或NSLock对象更简单</li>
<li>将同步与异步结合起来，可以实现与普通加锁机制一样的同步行为，而这么做却不会阻塞执行异步派发的线程</li>
<li>使用同步队列及栅栏块，可以令同步行为更高效</li>
<li><strong>atomic修饰属性，无法保证访问该对象时绝对是线程安全的，使用属性时，必定能从中获取到有效值，然而在同一个线程上多次调用获取方法(getter)</strong></li>
<li><p><strong>每次获取到的结果未必相同，在两次访问操作之间，其他线程可能会写入新的属性值</strong></p>
  <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 在同一个队列上执行setter和getter方法</span></div><div class="line">-(<span class="built_in">NSString</span> *)someString &#123;</div><div class="line">	__block <span class="built_in">NSStirng</span> *localSomeString;</div><div class="line">	<span class="built_in">dispatch_async</span>(queue, ^&#123;</div><div class="line">		localSomeString = _someString;</div><div class="line">	&#125;);</div><div class="line">	<span class="keyword">return</span> localSomeString;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)setSomeString:(<span class="built_in">NSString</span> *)someString &#123;</div><div class="line">	dispatch_barrier_async(queue, ^&#123;</div><div class="line">		_someString = someString;</div><div class="line">	&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="42-多用GCD-少用performSelector系列方法"><a href="#42-多用GCD-少用performSelector系列方法" class="headerlink" title="42. 多用GCD,少用performSelector系列方法"></a>42. 多用GCD,少用performSelector系列方法</h2><ul>
<li>performSelector系列方法在内存管理方面容易疏失，它无法确定将要执行的选择子具体是什么，因而ARC编译器无法插入适当的内存管理方法</li>
<li>performSelector系列方法所能处理的选择子太过局限</li>
</ul>
<h2 id="43-掌握GCD及操作队列的使用时机"><a href="#43-掌握GCD及操作队列的使用时机" class="headerlink" title="43. 掌握GCD及操作队列的使用时机"></a>43. <strong>掌握GCD及操作队列的使用时机</strong></h2><ul>
<li>操作队列在底层是用GCD来实现的</li>
<li>GCD是纯C的API,而操作队列则是OC对象</li>
<li>使用NSOperation 及 NSOperationQueue的好处如下：<ul>
<li>取消某个操作</li>
<li>指定操作间的依赖关系</li>
<li>通过键值观察机制监控NSOperation对象的属性</li>
<li>指定操作的优先级</li>
<li>重用NSOperation对象</li>
<li>有一个API选用了操作队列而非派发队列，这就是NSNotifacationCenter，开发者可通过其中的方法来注册监听器，以便在发生相关事件时得到通知</li>
</ul>
</li>
</ul>
<h2 id="44-通过Dispatch-Group机制，根据系统资源状况来执行任务"><a href="#44-通过Dispatch-Group机制，根据系统资源状况来执行任务" class="headerlink" title="44. 通过Dispatch Group机制，根据系统资源状况来执行任务"></a>44. 通过Dispatch Group机制，根据系统资源状况来执行任务</h2><ul>
<li>一系列任务可归入 dispatch group之中，开发者可以在这组任务执行完毕时获得通知</li>
<li>通过dispatch group，可以在并发式派发队列里同时执行多项任务，此时GCD会根据系统资源状况来调度这些并发执行的任务</li>
</ul>
<h2 id="45-使用dispatch-once来执行只需运行一次的线程安全代码"><a href="#45-使用dispatch-once来执行只需运行一次的线程安全代码" class="headerlink" title="45. 使用dispatch_once来执行只需运行一次的线程安全代码"></a>45. 使用dispatch_once来执行只需运行一次的线程安全代码</h2><ul>
<li>标记应该声明在static或global作用域中，这样的话，在把块传给dispatch_once函数时，传进去的标记也是相同的</li>
</ul>
<h2 id="46-不用使用dispatch-get-current-queue"><a href="#46-不用使用dispatch-get-current-queue" class="headerlink" title="46. 不用使用dispatch_get_current_queue"></a>46. <strong>不用使用dispatch_get_current_queue</strong></h2><h2 id="47-熟悉系统框架"><a href="#47-熟悉系统框架" class="headerlink" title="47. 熟悉系统框架"></a>47. 熟悉系统框架</h2><ul>
<li>在打算编写新的工具之前，最好在系统框架里搜索一下，通常都有写好的类可供直接使用</li>
</ul>
<h2 id="48-多用块枚举，少用for循环"><a href="#48-多用块枚举，少用for循环" class="headerlink" title="48. 多用块枚举，少用for循环"></a>48. 多用块枚举，少用for循环</h2><ul>
<li>字典和set都是“无序的”(unordered)</li>
<li>数组反向遍历 [array reverseObjectEnumerator];</li>
<li>基于块的遍历方式，可以修改块签名</li>
<li>遍历collection有四种方式， for循环，NSEnumerator遍历法，快速枚举，块枚举</li>
</ul>
<h2 id="49-对自定义其内存管理语义的collection使用无缝桥接"><a href="#49-对自定义其内存管理语义的collection使用无缝桥接" class="headerlink" title="49. 对自定义其内存管理语义的collection使用无缝桥接"></a>49. 对自定义其内存管理语义的collection使用无缝桥接</h2><ul>
<li>Foundation &lt;==&gt; CoreFoundation </li>
<li>CFArrayRef acfArray = (__bridge CFArrayRef) array;</li>
<li>反向转换可以使用 __bridge_transfer 实现</li>
<li>Foundation框架中的字典，其键的内存管理语义为”拷贝”(copy)，而值的语义却是”保留”</li>
<li>在CoreFoundation层面创建collection时，可以指定许多回调函数，这些函数表示此collection应如何处理其元素，然后可运用无缝桥接技术，将其转换成具备特殊内存管理语义的collection</li>
</ul>
<h2 id="50-构建缓存时选用NSCache而非NSDictionary"><a href="#50-构建缓存时选用NSCache而非NSDictionary" class="headerlink" title="50. 构建缓存时选用NSCache而非NSDictionary"></a>50. 构建缓存时选用NSCache而非NSDictionary</h2><ul>
<li>NSCache胜过NSDictionary之处<ul>
<li>自动删减缓存</li>
<li>NSCache并不会拷贝键，而是会保留它</li>
<li>NSCache是线程安全的</li>
</ul>
</li>
<li>NSPurgeableData对象搭配NSCache使用效果很好</li>
</ul>
<h2 id="51-精简initialize-与-load-的实现代码"><a href="#51-精简initialize-与-load-的实现代码" class="headerlink" title="51. 精简initialize 与 load 的实现代码"></a>51. 精简initialize 与 load 的实现代码</h2><ul>
<li>load方法：<ul>
<li>先调用类里的，在调用分类里的</li>
<li>在执行子类的load方法之前，必定会先执行所有超类的load方法</li>
<li>load方法中使用其他类是不安全的</li>
<li>load方法并不会像普通的方法那样，它并不会遵从那套继承规则</li>
<li>整个应用程序在执行load方法时都会阻塞</li>
<li>真正用途仅在于调试程序，比如分类里编写此方法，用来判断该分类是否已正确载入系统中</li>
<li>load方法不参与覆写机制</li>
</ul>
</li>
<li>initialize：<ul>
<li>惰性调用的</li>
<li>可以安全使用</li>
<li>initialize方法同其他消息一样，如果某个类未实现它，而其超类实现了，就会运行超类的实现代码</li>
<li>无法再编译期设定的全局变量，可以在initialize方法里初始化</li>
<li>由于此方法遵从普通的覆写规律，所以通常应该在里边判断当前需要初始化的是哪个类</li>
</ul>
</li>
</ul>
<h2 id="52-别忘了NSTimer会保留其目标对象"><a href="#52-别忘了NSTimer会保留其目标对象" class="headerlink" title="52. 别忘了NSTimer会保留其目标对象"></a>52. 别忘了NSTimer会保留其目标对象</h2><ul>
<li>NSTimer对象会保留其目标，直到计时器本身失效为止，如果计时器是用实例变量存放的，则实例也保留了计时器，形成了保留环</li>
<li>一次性计时器在触发完任务之后会失效</li>
<li>反复执行任务的计时器（repeating timer），很容易引入保留环，这种环状保留关系，可能是直接发生的，也可能是通过对象图里的其他对象间接发生的</li>
<li><p>可以扩充NSTimer的功能，用块来打破保留环。(必须创建分类)</p>
  <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSTimer</span> (<span class="title">EOCBlocksSupport</span>)</span></div><div class="line"> +(<span class="built_in">NSTimer</span> *)eoc_scheduledTimerWithTimeInterval:(<span class="built_in">NSTimeInterval</span>)interval </div><div class="line"> 					blcok : (<span class="keyword">void</span> (^)()) block </div><div class="line"> 					repeats:(<span class="built_in">BOOL</span>) repeats;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<ul>
<li>timer -&gt; block -&gt; self -&gt; timer</li>
</ul>
</li>
<li>类对象(class object)无须回收，因为类对象是单例</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/14/GCD-to-Explain-In-Detail/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/GCD-to-Explain-In-Detail/" itemprop="url">GCD to Explain In Detail </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-14T08:55:30+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/05/14/GCD-to-Explain-In-Detail/" class="leancloud_visitors" data-flag-title="GCD to Explain In Detail ">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="任务和队列"><a href="#任务和队列" class="headerlink" title="任务和队列"></a>任务和队列</h3><p><strong>任务：</strong></p>
<p>① block中代码;</p>
<p>② 执行任务两种方式：<strong>同步执行</strong>（sync）和 <strong>异步执行</strong>（async）;</p>
<p>③ 同步异步区别：</p>
<ul>
<li>是否等待队列的任务执行结束</li>
<li>是否具备开启新线程的能力</li>
</ul>
<p><strong>队列：</strong></p>
<p>① 一种特殊的线性表，遵循先进先出(FIFO)原则</p>
<p>② 两种队列：<strong>串行队列</strong> 和 <strong>并发队列</strong></p>
<p>③ 串行并发区别：</p>
<ul>
<li>执行顺序不同</li>
<li>开启线程数不同</li>
</ul>
<p>④ 系统提供的串行队列：<strong>主队列</strong> （Main Dispatch Queue）</p>
<blockquote>
<p>所有放到主队列中的任务，都会放在主线程执行<br>dispatch_get_main_queue();</p>
</blockquote>
<p>⑤ 系统提供的并发队列：<strong>全局并发队列</strong> （Global DisPatch Queue）</p>
<blockquote>
<p>dispatch_get_global_queue(优先级,0);<br>优先级：high、default、low、background;</p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><table>
<thead>
<tr>
<th style="text-align:center">区别</th>
<th style="text-align:center">并发队列</th>
<th style="text-align:center">串行队列</th>
<th style="text-align:center">主队列</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">同步(sync)</td>
<td style="text-align:center">没有开启新线程串行执行任务</td>
<td style="text-align:center">没有开启新线程串行执行任务</td>
<td style="text-align:center">主线程调用：死锁卡住不执行;其他线程调用：没有开启新线程，串行执行任务</td>
</tr>
<tr>
<td style="text-align:center">异步(async)</td>
<td style="text-align:center">有开启新线程并发执行任务</td>
<td style="text-align:center">有开启新线程（1条）串行执行任务</td>
<td style="text-align:center">没有开启新线程，串行执行任务</td>
</tr>
</tbody>
</table>
<h3 id="GCD线程间通信"><a href="#GCD线程间通信" class="headerlink" title="GCD线程间通信"></a>GCD线程间通信</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取全局并发队列</span></div><div class="line">    <span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>); </div><div class="line">        </div><div class="line">    dispatch_async(<span class="built_in">queue</span>, ^&#123;</div><div class="line">        <span class="comment">// 异步追加任务</span></div><div class="line"></div><div class="line">        </div><div class="line">        <span class="comment">// 回到主线程</span></div><div class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">            <span class="comment">// 追加在主线程中执行的任务</span></div><div class="line"></div><div class="line">        &#125;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="GCD其他方法"><a href="#GCD其他方法" class="headerlink" title="GCD其他方法"></a>GCD其他方法</h3><h5 id="1-GCD栅栏方法：dispatch-barrier-async"><a href="#1-GCD栅栏方法：dispatch-barrier-async" class="headerlink" title="1.GCD栅栏方法：dispatch_barrier_async"></a>1.GCD栅栏方法：dispatch_barrier_async</h5><p><img src="http://ownq1k9ul.bkt.clouddn.com/blog/2018-05-14-014904.jpg" alt=""></p>
<blockquote>
<p>在执行完栅栏前面的操作之后，才执行栅栏操作，最后再执行栅栏后边的操作。</p>
</blockquote>
<h5 id="2-GCD-延时执行方法：dispatch-after"><a href="#2-GCD-延时执行方法：dispatch-after" class="headerlink" title="2.GCD 延时执行方法：dispatch_after"></a>2.GCD 延时执行方法：dispatch_after</h5><blockquote>
<p>我们经常会遇到这样的需求：在指定时间（例如3秒）之后执行某个任务。可以用 GCD 的<code>dispatch_after</code>函数来实现。</p>
<p>需要注意的是：<code>dispatch_after</code>函数并不是在指定时间之后才开始执行处理，而是在指定时间之后将任务追加到主队列中。严格来说，这个时间并不是绝对准确的，但想要大致延迟执行任务，dispatch_after函数是很有效的。</p>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 延时执行方法 dispatch_after</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="selector-tag">dispatch_after</span>(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">2.0</span> * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        <span class="comment">// 2.0秒后异步追加任务代码到主队列，并开始执行</span></div><div class="line">        </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="3-GCD-一次性代码（只执行一次）：dispatch-once"><a href="#3-GCD-一次性代码（只执行一次）：dispatch-once" class="headerlink" title="3.GCD 一次性代码（只执行一次）：dispatch_once"></a>3.GCD 一次性代码（只执行一次）：dispatch_once</h5><blockquote>
<p>我们在创建单例、或者有整个程序运行过程中只执行一次的代码时，我们就用到了 GCD 的 <code>dispatch_once</code> 函数。使用<br><code>dispatch_once</code> 函数能保证某段代码在程序运行过程中只被执行1次，并且即使在多线程的环境下，<code>dispatch_once</code>也可以保证线程安全。</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)once &#123;</div><div class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">        <span class="comment">// 只执行1次的代码(这里面默认是线程安全的)</span></div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="4-GCD-快速迭代方法：dispatch-apply"><a href="#4-GCD-快速迭代方法：dispatch-apply" class="headerlink" title="4.GCD 快速迭代方法：dispatch_apply"></a>4.GCD 快速迭代方法：dispatch_apply</h5><ul>
<li>通常我们会用 for 循环遍历，但是 GCD 给我们提供了快速迭代的函数<code>dispatch_apply</code>。</li>
<li><code>dispatch_apply</code>按照指定的次数将指定的任务追加到指定的队列中，并等待全部队列执行结束。</li>
</ul>
<blockquote>
<p>如果是在串行队列中使用 <code>dispatch_apply</code>，那么就和 for 循环一样，按顺序同步执行。可这样就体现不出快速迭代的意义了。</p>
<p>我们可以利用并发队列进行异步执行。比如说遍历 0~5 这6个数字，for 循环的做法是每次取出一个元素，逐个遍历。<code>dispatch_apply</code> 可以 在多个线程中同时（异步）遍历多个数字。</p>
<p>还有一点，无论是在串行队列，还是异步队列中，<code>dispatch_apply</code> 都会等待全部任务执行完毕，这点就像是同步操作，也像是队列组中的 <code>dispatch_group_wait</code>方法。</p>
</blockquote>
<h5 id="5-GCD-队列组：dispatch-group"><a href="#5-GCD-队列组：dispatch-group" class="headerlink" title="5.GCD 队列组：dispatch_group"></a>5.GCD 队列组：dispatch_group</h5><p>有时候我们会有这样的需求：分别异步执行2个耗时任务，然后当2个耗时任务都执行完毕后再回到主线程执行任务。这时候我们可以用到 GCD 的队列组。</p>
<ul>
<li><p>调用队列组的 <code>dispatch_group_async</code> 先把任务放到队列中，然后将队列放入队列组中。或者使用队列组的 <code>dispatch_group_enter</code>、<code>dispatch_group_leave</code> 组合 来实现<br><code>dispatch_group_async</code>。</p>
</li>
<li><p>调用队列组的 <code>dispatch_group_notify</code> 回到指定线程执行任务。或者使用 <code>dispatch_group_wait</code> 回到当前线程继续向下执行（会阻塞当前线程）。</p>
</li>
</ul>
<h6 id="5-1-dispatch-group-notify"><a href="#5-1-dispatch-group-notify" class="headerlink" title="5.1 dispatch_group_notify"></a>5.1 dispatch_group_notify</h6><ul>
<li>监听 group 中任务的完成状态，当所有的任务都执行完成后，追加任务到 group 中，并执行任务。</li>
</ul>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)groupNotify &#123;</div><div class="line"></div><div class="line">    dispatch_group_t <span class="keyword">group</span> =  dispatch_group_create();</div><div class="line">    </div><div class="line">    dispatch_group_async(<span class="keyword">group</span>, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="comment">// 追加任务1</span></div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(<span class="keyword">group</span>, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="comment">// 追加任务2</span></div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_notify(<span class="keyword">group</span>, dispatch_get_main_queue(), ^&#123;</div><div class="line">        <span class="comment">// 等前面的异步任务1、任务2都执行完毕后，回到主线程执行下边任务</span></div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="5-2-dispatch-group-wait"><a href="#5-2-dispatch-group-wait" class="headerlink" title="5.2 dispatch_group_wait"></a>5.2 dispatch_group_wait</h6><ul>
<li>暂停当前线程（阻塞当前线程），等待指定的 group 中的任务执行完成后，才会往下继续执行。</li>
</ul>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)groupWait &#123;</div><div class="line"></div><div class="line">    dispatch_group_t <span class="keyword">group</span> =  dispatch_group_create();</div><div class="line">    </div><div class="line">    dispatch_group_async(<span class="keyword">group</span>, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="comment">// 追加任务1</span></div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(<span class="keyword">group</span>, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="comment">// 追加任务2</span></div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">// 等待上面的任务全部完成后，会往下继续执行（会阻塞当前线程）</span></div><div class="line">    dispatch_group_wait(<span class="keyword">group</span>, DISPATCH_TIME_FOREVER);</div><div class="line">	<span class="comment">// </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="5-3-dispatch-group-enter、dispatch-group-leave"><a href="#5-3-dispatch-group-enter、dispatch-group-leave" class="headerlink" title="5.3 dispatch_group_enter、dispatch_group_leave"></a>5.3 dispatch_group_enter、dispatch_group_leave</h6><ul>
<li><code>dispatch_group_enter</code> 标志着一个任务追加到 group，执行一次，相当于 group 中未执行完毕任务数+1</li>
<li><code>dispatch_group_leave</code> 标志着一个任务离开了 group，执行一次，相当于 group 中未执行完毕任务数-1。</li>
<li>当 group 中未执行完毕任务数为0的时候，才会使<code>dispatch_group_wait</code>解除阻塞，以及执行追加到<code>dispatch_group_notify</code>中的任务。</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t group = dispatch_group_create()<span class="comment">;</span></div><div class="line">    dispatch_queue_t queue = dispatch_get_global_queue(<span class="name">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)<span class="comment">;</span></div><div class="line">    dispatch_group_enter(<span class="name">group</span>)<span class="comment">;</span></div><div class="line">    dispatch_async(<span class="name">queue</span>, ^&#123;</div><div class="line">        // 追加任务<span class="number">1</span></div><div class="line"></div><div class="line">        dispatch_group_leave(<span class="name">group</span>)<span class="comment">;</span></div><div class="line">    &#125;)<span class="comment">;</span></div><div class="line">    </div><div class="line">    dispatch_group_enter(<span class="name">group</span>)<span class="comment">;</span></div><div class="line">    dispatch_async(<span class="name">queue</span>, ^&#123;</div><div class="line">        // 追加任务<span class="number">2</span></div><div class="line"></div><div class="line">        dispatch_group_leave(<span class="name">group</span>)<span class="comment">;</span></div><div class="line">    &#125;)<span class="comment">;</span></div><div class="line">    </div><div class="line">    dispatch_group_notify(<span class="name">group</span>, dispatch_get_main_queue(), ^&#123;</div><div class="line">        // 等前面的异步操作都执行完毕后，回到主线程.</div><div class="line"></div><div class="line">    &#125;)<span class="comment">;</span></div></pre></td></tr></table></figure>
<h5 id="6-GCD-信号量：dispatch-semaphore"><a href="#6-GCD-信号量：dispatch-semaphore" class="headerlink" title="6. GCD 信号量：dispatch_semaphore"></a>6. GCD 信号量：dispatch_semaphore</h5><p>GCD 中的信号量是指 <strong>Dispatch Semaphore</strong>，是持有计数的信号。类似于过高速路收费站的栏杆。可以通过时，打开栏杆，不可以通过时，关闭栏杆。在 <strong>Dispatch Semaphore</strong> 中，使用计数来完成这个功能，计数为0时等待，不可通过。计数为1或大于1时，计数减1且不等待，可通过。<br><strong>Dispatch Semaphore</strong> 提供了三个函数。</p>
<ul>
<li>dispatch_semaphore_create：创建一个Semaphore并初始化信号的总量</li>
<li>dispatch_semaphore_signal：发送一个信号，让信号总量加1</li>
<li>dispatch_semaphore_wait：可以使总信号量减1，当信号总量为0时就会一直等待（阻塞所在线程），否则就可以正常执行。</li>
</ul>
<blockquote>
<p>注意：信号量的使用前提是：想清楚你需要处理哪个线程等待（阻塞），又要哪个线程继续执行，然后使用信号量。</p>
</blockquote>
<p>Dispatch Semaphore 在实际开发中主要用于：</p>
<ul>
<li>保持线程同步，将异步执行任务转换为同步执行任务</li>
<li>保证线程安全，为线程加锁</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/13/Usage-Note-performSelector/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/Usage-Note-performSelector/" itemprop="url">Usage|Note:performSelector</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-13T21:55:01+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/05/13/Usage-Note-performSelector/" class="leancloud_visitors" data-flag-title="Usage|Note:performSelector">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="performSelector调用和直接调用的区别："><a href="#performSelector调用和直接调用的区别：" class="headerlink" title="performSelector调用和直接调用的区别："></a>performSelector调用和直接调用的区别：</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="keyword">self</span> <span class="function"><span class="keyword">method</span>];</span><span class="comment">//直接调用</span></div><div class="line">[<span class="keyword">self</span> performSelector:@<span class="keyword">selector</span>(<span class="function"><span class="keyword">method</span>) <span class="title">withObject</span>:</span><span class="keyword">nil</span>];</div></pre></td></tr></table></figure>
<ul>
<li>performSelector是运行时系统负责去找方法的，在编译时不做任何校验(编译器没任何提示)，如果方法不存在运行时程序崩溃；直接调用编译是会自动校验的，方法不存在时编译时候就能够发现（Xcode有提示）。</li>
</ul>
<blockquote>
<p>Cocoa支持在运行时向某个类添加方法，即方法编译时不存在，但是运行时候存在，这时候必然需要使用performSelector去调用。所以有时候如果使用了performSelector，为了程序的健壮性，会使用检查方法<br><code>- (BOOL)respondsToSelector:(SEL)aSelector;</code></p>
</blockquote>
<ul>
<li>直接调用方法时，一定要在头文件中声明该方法的使用，也要将头文件import进来。而使用performSelector时候，可以不用import头文件包含方法的对象</li>
</ul>
<h3 id="方法分析："><a href="#方法分析：" class="headerlink" title="方法分析："></a>方法分析：</h3><ul>
<li>同步执行方法</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- <span class="params">(id)</span>performSelector:<span class="params">(SEL)</span>aSelector;  </div><div class="line">- <span class="params">(id)</span>performSelector:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>object;  </div><div class="line">- <span class="params">(id)</span>performSelector:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>object1 withObject:<span class="params">(id)</span>object2;</div></pre></td></tr></table></figure>
<blockquote>
<p>这三个方法，均为同步执行，与线程无关，主线程和子线程中均可调用成功。等同于直接调用该方法。在需要动态的去调用方法的时候去使用。</p>
</blockquote>
<ul>
<li>异步执行方法</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- <span class="params">(void)</span>performSelector:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>anArgument afterDelay:<span class="params">(NSTimeInterval)</span>delay inModes:<span class="params">(NSArray *)</span>modes;  </div><div class="line">- <span class="params">(void)</span>performSelector:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>anArgument afterDelay:<span class="params">(NSTimeInterval)</span>delay;</div></pre></td></tr></table></figure>
<blockquote>
<p>这两个方法为异步执行，即使delay传参为0，仍为异步执行。只能在主线程中执行，在子线程中不会调到aSelector方法。<br>在方法未到执行时间之前，取消方法为：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)<span class="string">cancelPreviousPerformRequestsWithTarget:</span>(id)aTarget <span class="string">selector:</span>(SEL)aSelector <span class="string">object:</span>(id)anArgument;  </div><div class="line">+ (<span class="keyword">void</span>)<span class="string">cancelPreviousPerformRequestsWithTarget:</span>(id)aTarget;</div></pre></td></tr></table></figure>
<p>NOTE:<br><strong>在调用方法之前或在该方法所在的viewController生命周期结束的时候去调用取消函数，以确保不会引起内存泄露。</strong></p>
</blockquote>
<p><strong>拓展：</strong></p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- <span class="params">(void)</span>performSelector:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>anArgument afterDelay:<span class="params">(NSTimeInterval)</span>delay;</div></pre></td></tr></table></figure>
<blockquote>
<p>这个方法是单线程的，也就是说只有当前调用次方法的函数执行完毕后，selector方法才会被调用。</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)<span class="string">changeText:</span>(NSString *)string  </div><div class="line">&#123;  </div><div class="line">    NSLog(@<span class="string">"changeText:(NSString *)string"</span>);  </div><div class="line">&#125;   </div><div class="line">- (<span class="keyword">void</span>)changePopoverSize  </div><div class="line">&#123;     </div><div class="line">    [self <span class="string">performSelector:</span><span class="meta">@selector</span>(<span class="string">changeText:</span>) <span class="string">withObject:</span>@<span class="string">"Happy aha"</span> <span class="string">afterDelay:</span><span class="number">1</span>];  </div><div class="line">    NSLog(@<span class="string">"changePopoverSize#####end"</span>);  </div><div class="line">    sleep(<span class="number">5</span>);  </div><div class="line">    NSLog(@<span class="string">"changePopoverSize-----end"</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>打印结果：</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">changePopoverSize#####end</div><div class="line">changePopoverSize-----end</div><div class="line">changeText:(NSString *)string</div></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>wait 函数</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- <span class="params">(void)</span>performSelectorInBackground:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>arg  </div><div class="line">或者  </div><div class="line">- <span class="params">(void)</span>performSelectorOnMainThread:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>arg waitUntilDone:<span class="params">(BOOL)</span>wait;</div></pre></td></tr></table></figure>
<blockquote>
<p>这两个方法，在主线程和子线程中均可执行，均会调用主线程的aSelector方法；<br>如果设置wait为YES:等待当前线程执行完以后，主线程才会执行aSelector方法；</p>
<p>设置为NO：不等待当前线程执行完，就在主线程上执行aSelector方法。<br>如果，当前线程就是主线程，那么aSelector方法会马上执行。</p>
<p>注意：apple不允许程序员在主线程以外的线程中对UI进行操作，此时我们必须调用performSelectorOnMainThread函数在主线程中完成UI的更新。</p>
</blockquote>
<ul>
<li>多线程执行</li>
</ul>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- <span class="params">(void)</span>performSelectorInBackground:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>arg  </div><div class="line">或者  </div><div class="line">- <span class="params">(void)</span>performSelectorOnMainThread:<span class="params">(SEL)</span>aSelector withObject:<span class="params">(id)</span>arg waitUntilDone:<span class="params">(BOOL)</span>wait;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/09/GCD-execution-sequence/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/09/GCD-execution-sequence/" itemprop="url">GCD - execution sequence</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-09T22:41:12+08:00">
                2018-05-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/05/09/GCD-execution-sequence/" class="leancloud_visitors" data-flag-title="GCD - execution sequence">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>GCD经典面试题</strong></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"2--%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"A"</span>);</div><div class="line">	    &#125;);</div><div class="line">	    <span class="built_in">NSLog</span>(<span class="string">@"B"</span>);</div><div class="line">	    <span class="built_in">dispatch_queue_t</span> temp = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, <span class="number">0</span>);</div><div class="line">	    </div><div class="line">	    <span class="built_in">dispatch_sync</span>(temp, ^&#123;</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"3--%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"C"</span>);</div><div class="line">	    &#125;);</div><div class="line">	    </div><div class="line">	    <span class="built_in">dispatch_async</span>(temp, ^&#123;</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"4--%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"D"</span>);</div><div class="line">	    &#125;);</div><div class="line">	    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"5--%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">	        <span class="built_in">NSLog</span>(<span class="string">@"E"</span>);</div><div class="line">	    &#125;);</div><div class="line">	    </div><div class="line">	    [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(method) withObject:<span class="literal">nil</span> afterDelay:<span class="number">0.0</span>];</div><div class="line">	    <span class="built_in">NSLog</span>(<span class="string">@"F"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)method &#123;</div><div class="line">	<span class="built_in">NSLog</span>(<span class="string">@"G"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>/<em>==================================================================================</em>/</p>
<h3 id="答案有4个，编译结果现有2个-！"><a href="#答案有4个，编译结果现有2个-！" class="headerlink" title="答案有4个，编译结果现有2个 ！"></a>答案有4个，编译结果现有2个 ！</h3><blockquote>
<p>答案①</p>
</blockquote>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">B</div><div class="line"><span class="number">3</span>--&lt;NSThread: <span class="number">0</span>x604000061f00&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">C</div><div class="line">F</div><div class="line"><span class="number">2</span>--&lt;NSThread: <span class="number">0</span>x604000061f00&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">A</div><div class="line"><span class="number">5</span>--&lt;NSThread: <span class="number">0</span>x604000061f00&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">E</div><div class="line"><span class="number">6</span>--&lt;NSThread: <span class="number">0</span>x604000061f00&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">G</div><div class="line"><span class="number">4</span>--&lt;NSThread: <span class="number">0</span>x600000267100&gt;&#123;<span class="attr">number</span> = <span class="number">3</span>, <span class="attr">name</span> = (<span class="literal">null</span>)&#125;</div><div class="line">D</div></pre></td></tr></table></figure>
<blockquote>
<p>答案②</p>
</blockquote>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">B</div><div class="line"><span class="number">3</span>--&lt;NSThread: <span class="number">0</span>x60400007d3c0&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">C</div><div class="line">F</div><div class="line"><span class="number">4</span>--&lt;NSThread: <span class="number">0</span>x60000026c500&gt;&#123;<span class="attr">number</span> = <span class="number">3</span>, <span class="attr">name</span> = (<span class="literal">null</span>)&#125;</div><div class="line">D</div><div class="line"><span class="number">2</span>--&lt;NSThread: <span class="number">0</span>x60400007d3c0&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">A</div><div class="line"><span class="number">5</span>--&lt;NSThread: <span class="number">0</span>x60400007d3c0&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">E</div><div class="line"><span class="number">6</span>--&lt;NSThread: <span class="number">0</span>x60400007d3c0&gt;&#123;<span class="attr">number</span> = <span class="number">1</span>, <span class="attr">name</span> = main&#125;</div><div class="line">G</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/07/C-language-knowledge-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/07/C-language-knowledge-summary/" itemprop="url">C language knowledge summary</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-07T13:27:10+08:00">
                2018-05-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/05/07/C-language-knowledge-summary/" class="leancloud_visitors" data-flag-title="C language knowledge summary">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="String-function"><a href="#String-function" class="headerlink" title="String function"></a>String function</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">strcpy</span>(字符数组,字符串);     <span class="comment">//拷贝</span></div><div class="line"><span class="selector-tag">strcat</span>(字符数组,字符串);     <span class="comment">//拼接</span></div><div class="line"><span class="selector-tag">strcmp</span>(字符串<span class="number">1</span>,字符串<span class="number">2</span>);     <span class="comment">//比较</span></div><div class="line"><span class="selector-tag">strlwr</span>(字符串);             <span class="comment">//转小写</span></div><div class="line"><span class="selector-tag">strupr</span>(字符串);             <span class="comment">//转大写</span></div><div class="line"><span class="selector-tag">strlen</span>(字符串);             <span class="comment">//算长度</span></div><div class="line"><span class="selector-tag">strncpy</span>(字符数组,字符串<span class="number">1</span>,n); <span class="comment">//字符串1中前n个字符拷贝到字符数组</span></div></pre></td></tr></table></figure>
<h3 id="static："><a href="#static：" class="headerlink" title="static："></a>static：</h3><ul>
<li>静态局部变量:</li>
</ul>
<blockquote>
<p>①定义时不赋初值，则编译时赋初值，自动赋初值为0，只赋值一次;</p>
<p>②函数调用结束后任然存在，其他函数不能引用，只能本函数引用。</p>
</blockquote>
<ul>
<li>静态函数</li>
</ul>
<blockquote>
<p>又称内部函数,只能本文件使用。</p>
</blockquote>
<h3 id="extern"><a href="#extern" class="headerlink" title="extern"></a>extern</h3><ul>
<li>外部变量声明</li>
</ul>
<blockquote>
<p>声明变量的作用域扩展到此位置（本文件);</p>
</blockquote>
<ul>
<li>外部函数声明</li>
</ul>
<blockquote>
<p>本文件可使用外部声明的函数（默认值);</p>
</blockquote>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h3><p><strong>用数组元素作 实参时，向形参变量传递的是数组元素的值，而用数组名做函数实参时，向形参（数组名或者指针变量）传递的是数组元素的首地址</strong> </p>
<blockquote>
<p><strong>数组名</strong> 代表数组首元素的地址，它是一个指针型常量，它的值在程序运行期间固定不变，例如：</p>
<p>数组 <code>a[10] = {1,2,3,4,5,6,7,8,9,10};</code>则<code>a++</code>无法实现</p>
<p>指针变量p指向数组a的首地址: <code>int *p = a;</code> 则：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (p = <span class="keyword">a</span>; p&lt; <span class="keyword">a</span> + <span class="number">10</span>; p++) </div><div class="line">printf(<span class="string">"%d"</span>,*p)</div></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>实参数组名代表一个固定的地址，或者说是指针常量，但形参数组名并不是一个固定的地址，而是按指针变量处理</strong></p>
<blockquote>
<p>main函数中，数组a[5] = {1,2,3,4,5}; a为数组首地址，不能自加自减<br>（a++, a–）因为a为常量地址（指针常量),但可以<code>a+i</code>这样写， <code>a[i] = *(a+i)始终成立</code></p>
<p>子函数（自定义函数中）,数组形参传的是数组首地址，不检查数组长度，系统默认当指针处理，所以数组a可自加自减，（对指针操作）;</p>
<p>指针变量必须先赋值，后使用，这样使用极其危险：<br><code>int *p;</code>然后直接使用*p</p>
</blockquote>
<h3 id="通过指针引用多维数组"><a href="#通过指针引用多维数组" class="headerlink" title="通过指针引用多维数组"></a>通过指针引用多维数组</h3><p>a[3][4]</p>
<blockquote>
<p>a: 首行首地址</p>
<p>a+1: 序号为1的行的首地址| a+1指向a[1],或者a+1的值是a[1]的首地址</p>
<p>a[i] 始终等价于(恒定于) * (a + i);</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a[1] <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> *a+1;</div><div class="line">a[<span class="string">0</span>]+1 <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> *(a+0)+1 <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> &amp;a[<span class="string">0</span>][<span class="symbol">1</span>];</div><div class="line">a[<span class="string">1</span>]+2 <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> *(a+1)+2 <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> &amp;a[<span class="string">1</span>][<span class="symbol">2</span>];</div><div class="line"><span class="emphasis">*a[i]+j  或者 *</span>(*(a+i)+j) <span class="xml"><span class="tag">&lt;<span class="name">===</span>&gt;</span></span> a[<span class="string">i</span>][<span class="symbol">j</span>]的值</div></pre></td></tr></table></figure>
<h3 id="通过指针引用字符串"><a href="#通过指针引用字符串" class="headerlink" title="通过指针引用字符串"></a>通过指针引用字符串</h3><ul>
<li>字符指针变量指向一个字符串常量； <code>char *string = &quot;I Love China!&quot;</code></li>
<li>C语言中只有字符变量，没有字符串变量</li>
<li>通过字符数组名或字符指针可以输出一个字符串，而对一个数字型数组，是不能用数组名输出它的全部元素，只能逐个输出。</li>
<li><p>字符数组 vs 字符指针</p>
<blockquote>
<p>字符数组有若干元素组成，每一个元素中放一个字符，字符指针变量中存放的是地址。</p>
<p>字符数组 =&gt; 数组名代表一个固定值（首元素地址）不能改变，各元素值可以再赋值。但只能定义时全部赋值，不能一次性赋值。</p>
<p>字符指针 =&gt; 值可变，但指向的字符串为常量，不能修改。指针变量指向字串时，引用字符可使用： char *a = “I Love China!”; 则可使用 a[5]引用</p>
</blockquote>
</li>
</ul>
<h3 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h3><p>定义：编译系统为函数代码分配一段存储空间，这段存储空间的起始地址（入口地址）称为函数指针。</p>
<p><code>int (*p) (int, int)</code></p>
<p>函数指针作为函数参数，返回值等常见使用</p>
<p>typedef int (*PFUN)(int, int)  则 PFUN p = NULL;</p>
<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><p>typedef struct {<br>    char *name;<br>    char name[20];<br>} 使用数组及指针的区别：</p>
<p>char *name 未分配存储空间；而数组名name是一个常量指针，已分配存储空间，赋值操作strcpy;</p>
<h3 id="内存操作函数"><a href="#内存操作函数" class="headerlink" title="内存操作函数"></a>内存操作函数</h3><p>free () 标记删除，不清楚内容<br>memset ,memcpy, memcmp，均是按 <strong>字节</strong> 操作内存，既可以用于堆内存也可以用于栈内存。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">char</span> *name = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>)*<span class="number">20</span>);</div><div class="line"><span class="built_in">strcpy</span>(name, <span class="string">"iPhone"</span>); <span class="comment">//已有存储空间</span></div><div class="line">结构体中，如果包含指针，结构体分配内存中指针变量需要单独分配内存</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/04/箴言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/04/箴言/" itemprop="url">箴言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-04T17:46:13+08:00">
                2018-02-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/02/04/箴言/" class="leancloud_visitors" data-flag-title="箴言">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="箴言"><a href="#箴言" class="headerlink" title="箴言"></a>箴言</h2><ul>
<li>读书到底苦不苦？</li>
</ul>
<blockquote>
<p>苦。可是今天不吃苦，等到将来一无所长，混迹于社会最底层时，那时的人生之路只会走的更辛苦。</p>
<p>千万不要把学习当做最苦的事情，因为世界上任何一种苦拎出来，都不读书学习苦。</p>
<p>真正决定一个人成就的，不是天分，也不是运气，而是严格的自律和高强度的付出。读书时一种自律和付出，更是一种最低成本改变自己命运的方式。</p>
<p>唯累过，方知闲。唯苦过，方知甜。</p>
</blockquote>
<ul>
<li>2018年，你还会回到北上广深吗？</li>
</ul>
<blockquote>
<p>狼狈逃离，逃离容易，想要再出来可就难了。不过我想说的是，即便最后要逃离北上广，也要在北上广学得一技之长和在社会上立足的能力再走。离开北上广并不是说一定就没有出路，如果通过在北上广的锻炼，把自己发展成一个可以在全国范围内做资源配置的人，那不管在哪里都能发展得不错的。人最怕把自己包裹起来，不与外界接触，那么你的后代又只能从头开始奋斗了。</p>
<p>一线城市的朋友在朋友圈抱怨加班成魔、房租高出天际，三四线城市的在朋友圈抱怨迷茫，不知前途在哪。<strong>北上广容不下肉体，三四线放不下灵魂。</strong></p>
<p>对于自己内心没有方向的人，去哪里都是逃离，而对于生命有方向的人，走向哪里都是追寻。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/26/终端基本命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/26/终端基本命令/" itemprop="url">终端基本命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-26T10:13:52+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Technology/" itemprop="url" rel="index">
                    <span itemprop="name">Technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/26/终端基本命令/" class="leancloud_visitors" data-flag-title="终端基本命令">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><ul>
<li><p>1、列出文件</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">ls</span> 参数 目录名</div></pre></td></tr></table></figure>
<p>例: 看看驱动目录下有什么:</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls /<span class="keyword">System</span>/<span class="keyword">Library</span>/Extensions</div></pre></td></tr></table></figure>
<blockquote>
<p>参数 <strong>-w</strong> 显示中文，<strong>-l</strong> 详细信息， <strong>-a</strong> 包括隐藏文件</p>
</blockquote>
</li>
<li><p>2、转换目录     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> 目录名</div></pre></td></tr></table></figure>
<p>例：想到驱动目录下溜达一圈  </p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /<span class="keyword">System</span>/<span class="keyword">Library</span>/Extensions</div></pre></td></tr></table></figure>
</li>
<li><p>3、建立新目录</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">mkdir</span> 目录名</div></pre></td></tr></table></figure>
<p>例：在驱动目录下建一个备份目录 <code>backup</code>  </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir <span class="regexp">/System/</span>Library<span class="regexp">/Extensions/</span>backup</div></pre></td></tr></table></figure>
<p>在桌面上建一个备份目录 <code>backup</code>   </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir <span class="regexp">/User/</span>用户名<span class="regexp">/Desktop/</span>backup</div></pre></td></tr></table></figure>
</li>
<li><p>4、拷贝文件</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cp</span> 参数 源文件 目标文件</div></pre></td></tr></table></figure>
<p>例：想把桌面的<code>Natit.kext</code> 拷贝到驱动目录中  </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -R <span class="regexp">/User/</span>用户名<span class="regexp">/Desktop/</span>Natit.kext <span class="regexp">/System/</span>Library<span class="regexp">/Extensions</span></div></pre></td></tr></table></figure>
<blockquote>
<p>参数<strong>R</strong>表示对目录进行递归操作，<code>kext</code>在图形界面下看起来是个文件，实际上是个文件夹</p>
</blockquote>
<p>把驱动目录下的所有文件备份到桌面<code>backup</code></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -R <span class="regexp">/System/</span>Library<span class="regexp">/Extensions/</span>* <span class="regexp">/User/</span>用户名<span class="regexp">/Desktop/</span>backup</div></pre></td></tr></table></figure>
</li>
<li><p>5、删除文件</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">rm</span> 参数 文件</div></pre></td></tr></table></figure>
<p>例：想删除驱动的缓存  </p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rm -rf /<span class="keyword">System</span>/<span class="keyword">Library</span>/Extensions.kextcache</div><div class="line">rm -rf /<span class="keyword">System</span>/<span class="keyword">Library</span>/Extensions.mkext</div></pre></td></tr></table></figure>
<blockquote>
<p>参数<strong>－rf</strong> 表示递归和强制，千万要小心使用，如果执行了 <code>rm -rf /</code> 你的系统就全没了</p>
</blockquote>
</li>
<li><p>6、移动文件</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mv</span> 文件</div></pre></td></tr></table></figure>
<p>例：想把<code>AppleHDA.Kext</code> 移到桌面    </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv <span class="regexp">/System/</span>Library<span class="regexp">/Extensions/</span>AppleHDA.kext <span class="regexp">/User/</span>用户名<span class="regexp">/Desktop</span></div></pre></td></tr></table></figure>
</li>
<li><p>7、文本编辑</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">nano</span> 文件名</div></pre></td></tr></table></figure>
<p>例：编辑<code>natit Info.plist</code>     </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano <span class="regexp">/System/</span>Library<span class="regexp">/Extensions/</span>Natit.kext<span class="regexp">/Info.plist</span></div></pre></td></tr></table></figure>
<blockquote>
<p>nano 和 vim 都是文本编译</p>
</blockquote>
</li>
</ul>
<h3 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>mkdir</em></td>
<td style="text-align:center">创建一个目录</td>
<td style="text-align:center">mkdir dirname</td>
</tr>
<tr>
<td style="text-align:center"><em>rmdir</em></td>
<td style="text-align:center">删除一个目录</td>
<td style="text-align:center">rmdir dirname</td>
</tr>
<tr>
<td style="text-align:center"><em>mvdir</em></td>
<td style="text-align:center">移动或重命名一个目录</td>
<td style="text-align:center">mvdir dir1 dir2</td>
</tr>
<tr>
<td style="text-align:center"><em>cd</em></td>
<td style="text-align:center">改变当前目录</td>
<td style="text-align:center">cd dirname</td>
</tr>
<tr>
<td style="text-align:center"><em>pwd</em></td>
<td style="text-align:center">显示当前目录的路径名</td>
<td style="text-align:center">pwd</td>
</tr>
<tr>
<td style="text-align:center"><em>ls</em></td>
<td style="text-align:center">显示当前目录的内容</td>
<td style="text-align:center">ls -la</td>
</tr>
</tbody>
</table>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>cat</em></td>
<td style="text-align:center">显示或连接文件</td>
<td style="text-align:center">cat filename</td>
</tr>
<tr>
<td style="text-align:center"><em>od</em></td>
<td style="text-align:center">显示非文本文件的内容</td>
<td style="text-align:center">od -c filename</td>
</tr>
<tr>
<td style="text-align:center"><em>cp</em></td>
<td style="text-align:center">复制文件或目录</td>
<td style="text-align:center">cp file1 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>rm</em></td>
<td style="text-align:center">删除文件或目录</td>
<td style="text-align:center">rm filename</td>
</tr>
<tr>
<td style="text-align:center"><em>mv</em></td>
<td style="text-align:center">改变文件名或所在目录</td>
<td style="text-align:center">mv file1 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>find</em></td>
<td style="text-align:center">使用匹配表达式查找文件</td>
<td style="text-align:center">find . -name “*.c” -print</td>
</tr>
<tr>
<td style="text-align:center"><em>file</em></td>
<td style="text-align:center">显示文件类型</td>
<td style="text-align:center">file filename</td>
</tr>
</tbody>
</table>
<h3 id="选择操作"><a href="#选择操作" class="headerlink" title="选择操作"></a>选择操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>head</em></td>
<td style="text-align:center">显示文件的最初几行</td>
<td style="text-align:center">head -20 filename</td>
</tr>
<tr>
<td style="text-align:center"><em>tail</em></td>
<td style="text-align:center">显示文件的最后几行</td>
<td style="text-align:center">tail -15 filename</td>
</tr>
<tr>
<td style="text-align:center"><em>cut</em></td>
<td style="text-align:center">显示文件每行中的某些域</td>
<td style="text-align:center">cut -f1,7 -d: /etc/passwd</td>
</tr>
<tr>
<td style="text-align:center"><em>colrm</em></td>
<td style="text-align:center">从标准输入中删除若干列</td>
<td style="text-align:center">colrm 8 20 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>diff</em></td>
<td style="text-align:center">比较并显示两个文件的差异</td>
<td style="text-align:center">diff file1 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>sort</em></td>
<td style="text-align:center">排序或归并文件</td>
<td style="text-align:center">sort -d -f -u file1</td>
</tr>
<tr>
<td style="text-align:center"><em>uniq</em></td>
<td style="text-align:center">去掉文件中的重复行</td>
<td style="text-align:center">uniq file1 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>comm</em></td>
<td style="text-align:center">显示两有序文件的公共和非公共行</td>
<td style="text-align:center">comm file1 file2</td>
</tr>
<tr>
<td style="text-align:center"><em>wc</em></td>
<td style="text-align:center">统计文件的字符数、词数和行数</td>
<td style="text-align:center">wc filename</td>
</tr>
<tr>
<td style="text-align:center"><em>nl</em></td>
<td style="text-align:center">给文件加上行号</td>
<td style="text-align:center">nl file1 &gt;file2</td>
</tr>
</tbody>
</table>
<h3 id="进程操作"><a href="#进程操作" class="headerlink" title="进程操作"></a>进程操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>ps</em></td>
<td style="text-align:center">显示进程当前状态</td>
<td style="text-align:center">ps u</td>
</tr>
<tr>
<td style="text-align:center"><em>kill</em></td>
<td style="text-align:center">终止进程</td>
<td style="text-align:center">kill -9 30142</td>
</tr>
</tbody>
</table>
<h3 id="时间操作"><a href="#时间操作" class="headerlink" title="时间操作"></a>时间操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>date</em></td>
<td style="text-align:center">显示系统的当前日期和时间</td>
<td style="text-align:center">date</td>
</tr>
<tr>
<td style="text-align:center"><em>cal</em></td>
<td style="text-align:center">显示日历</td>
<td style="text-align:center">cal 8 1996</td>
</tr>
<tr>
<td style="text-align:center"><em>time</em></td>
<td style="text-align:center">统计程序的执行时间</td>
<td style="text-align:center">time a.out</td>
</tr>
</tbody>
</table>
<h3 id="网络与通信操作"><a href="#网络与通信操作" class="headerlink" title="网络与通信操作"></a>网络与通信操作</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>telnet</em></td>
<td style="text-align:center">远程登录</td>
<td style="text-align:center">telnet hpc.sp.net.edu.cn</td>
</tr>
<tr>
<td style="text-align:center"><em>rlogin</em></td>
<td style="text-align:center">远程登录</td>
<td style="text-align:center">rlogin hostname -l username</td>
</tr>
<tr>
<td style="text-align:center"><em>rsh</em></td>
<td style="text-align:center">在远程主机执行指定命令</td>
<td style="text-align:center">rsh f01n03 date</td>
</tr>
<tr>
<td style="text-align:center"><em>ftp</em></td>
<td style="text-align:center">在本地主机与远程主机之间传输文件</td>
<td style="text-align:center">ftpftp.sp.net.edu.cn</td>
</tr>
<tr>
<td style="text-align:center"><em>rcp</em></td>
<td style="text-align:center">在本地主机与远程主机 之间复制文件</td>
<td style="text-align:center">rcp file1 host1:file2</td>
</tr>
<tr>
<td style="text-align:center"><em>ping</em></td>
<td style="text-align:center">给一个网络主机发送 回应请求</td>
<td style="text-align:center">ping hpc.sp.net.edu.cn</td>
</tr>
<tr>
<td style="text-align:center"><em>mail</em></td>
<td style="text-align:center">阅读和发送电子邮件</td>
<td style="text-align:center">mail</td>
</tr>
<tr>
<td style="text-align:center"><em>write</em></td>
<td style="text-align:center">给另一用户发送报文</td>
<td style="text-align:center">write username pts/1</td>
</tr>
<tr>
<td style="text-align:center"><em>mesg</em></td>
<td style="text-align:center">允许或拒绝接收报文</td>
<td style="text-align:center">mesg n</td>
</tr>
</tbody>
</table>
<h3 id="Korn-Shell-命令"><a href="#Korn-Shell-命令" class="headerlink" title="Korn Shell 命令"></a>Korn Shell 命令</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>history</em></td>
<td style="text-align:center">列出最近执行过的几条命令及编号</td>
<td style="text-align:center">history</td>
</tr>
<tr>
<td style="text-align:center"><em>r</em></td>
<td style="text-align:center">重复执行最近执行过的 某条命令</td>
<td style="text-align:center">r -2</td>
</tr>
<tr>
<td style="text-align:center"><em>alias</em></td>
<td style="text-align:center">给某个命令定义别名</td>
<td style="text-align:center">alias del=rm -i</td>
</tr>
<tr>
<td style="text-align:center"><em>unalias</em></td>
<td style="text-align:center">取消对某个别名的定义</td>
<td style="text-align:center">unalias del</td>
</tr>
</tbody>
</table>
<h3 id="其它命令"><a href="#其它命令" class="headerlink" title="其它命令"></a>其它命令</h3><table>
<thead>
<tr>
<th style="text-align:center">命令名</th>
<th style="text-align:center">功能描述</th>
<th style="text-align:center">使用举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>uname</em></td>
<td style="text-align:center">显示操作系统的有关信息</td>
<td style="text-align:center">uname -a</td>
</tr>
<tr>
<td style="text-align:center"><em>clear</em></td>
<td style="text-align:center">清除屏幕或窗口内容</td>
<td style="text-align:center">clear</td>
</tr>
<tr>
<td style="text-align:center"><em>env</em></td>
<td style="text-align:center">显示当前所有设置过的环境变量</td>
<td style="text-align:center">env</td>
</tr>
<tr>
<td style="text-align:center"><em>who</em></td>
<td style="text-align:center">列出当前登录的所有用户</td>
<td style="text-align:center">who</td>
</tr>
<tr>
<td style="text-align:center"><em>whoami</em></td>
<td style="text-align:center">显示当前正进行操作的用户名</td>
<td style="text-align:center">whoami</td>
</tr>
<tr>
<td style="text-align:center"><em>tty</em></td>
<td style="text-align:center">显示终端或伪终端的名称</td>
<td style="text-align:center">tty</td>
</tr>
<tr>
<td style="text-align:center"><em>stty</em></td>
<td style="text-align:center">显示或重置控制键定义</td>
<td style="text-align:center">stty -a</td>
</tr>
<tr>
<td style="text-align:center"><em>du</em></td>
<td style="text-align:center">查询磁盘使用情况</td>
<td style="text-align:center">du -k subdir</td>
</tr>
<tr>
<td style="text-align:center"><em>df /tmp</em></td>
<td style="text-align:center">显示文件系统的总空间和可用空间</td>
</tr>
<tr>
<td style="text-align:center"><em>w</em></td>
<td style="text-align:center">显示当前系统活动的总信息</td>
</tr>
</tbody>
</table>
<h4 id="开启功能"><a href="#开启功能" class="headerlink" title="开启功能"></a>开启功能</h4><h5 id="1-Finder显示隐藏文件"><a href="#1-Finder显示隐藏文件" class="headerlink" title="1.Finder显示隐藏文件"></a>1.Finder显示隐藏文件</h5><ul>
<li><p>显示隐藏文件</p>
<p>在<code>终端</code>中输入下面的命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">defaults write com<span class="selector-class">.apple</span><span class="selector-class">.finder</span> AppleShowAllFiles -bool true</div></pre></td></tr></table></figure>
</li>
<li><p>恢复隐藏文件</p>
<p>在<code>终端</code>中输入下面的命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">defaults write com<span class="selector-class">.apple</span><span class="selector-class">.finder</span> AppleShowAllFiles -bool false</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="2-在Finder标题栏显示完整路径"><a href="#2-在Finder标题栏显示完整路径" class="headerlink" title="2.在Finder标题栏显示完整路径"></a>2.在Finder标题栏显示完整路径</h5><p>在<code>终端</code>中输入下面的命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">defaults write com<span class="selector-class">.apple</span><span class="selector-class">.finder</span> _FXShowPosixPathInTitle -bool YES</div></pre></td></tr></table></figure>
<h4 id="open命令"><a href="#open命令" class="headerlink" title="open命令"></a>open命令</h4><p><code>open</code>命令用于打开文件、目录或执行程序。就等同于在命令行模式下，重复图形界面<strong>“双击”</strong>的动作。例如这个命令与在<code>Finder</code>中双击<code>Safari</code>是一样的： </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> open /Applications/Safari.app/</span></div></pre></td></tr></table></figure>
<blockquote>
<p>可以使用  <strong>-a</strong> 选项要求自行选择打开的程序，或使用  <strong>-e</strong> 强制在TextEdit中编辑此文件。<br>open 一个目录会在Finder窗口中打开此目录。一个很有用的技巧是  <code>open .</code> 打开当前目录。 </p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/25/iOS中集成ijkplayer视频直播框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/25/iOS中集成ijkplayer视频直播框架/" itemprop="url">iOS中集成ijkplayer视频直播框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T22:58:14+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/25/iOS中集成ijkplayer视频直播框架/" class="leancloud_visitors" data-flag-title="iOS中集成ijkplayer视频直播框架">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>ijkplayer</code>是一款使用率极高的<strong>视频直播</strong>框架，基于<code>ffmpeg</code>，支持<code>Android</code>和<code>ios</code>，但直接导入项目的操作比较繁琐，而且对原有项目结构的侵入性较强，复用差，下面介绍把<code>ijkplayer</code>打包成<strong>静态库</strong>。</p>
<h3 id="1、下载"><a href="#1、下载" class="headerlink" title="1、下载"></a>1、下载</h3><p><a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">GitHub下载地址</a></p>
<p>下载完成后解压，解压后的文件目录如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1803339-728d89123de76da7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="目录"></p>
<h3 id="2、编译"><a href="#2、编译" class="headerlink" title="2、编译"></a>2、编译</h3><p>说是编译<code>ijkplayer</code>，其实是编译<code>ffmpeg</code>，在这里我们已经下载好了<code>ijkplayer</code>, 所以 <code>github</code> 上<code>README.md</code>中的 Build iOS 那一步中有一些步骤是不需要的。</p>
<p>####编译步骤：</p>
<ul>
<li><p>打开<strong>终端</strong>，<code>cd</code>到<code>ijkplayer-master</code>文件夹下，也就是下载完解压后的文件夹, 如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1803339-c3b8f8bcae855612.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cd到这个文件夹"></p>
</li>
<li><p>执行命令行<code>./init-ios.sh</code>, 这一步是去下载 <code>ffmpeg</code> 的, 时间会久一点, 耐心等一下.如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1803339-96d2217e323aab4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="下载FFmpeg"></p>
</li>
<li><p>下载完成后, 执行<code>cd ios</code>, 也就是进入到 ios目录中, 如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1803339-20b7360630592cb4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="进入目录"></p>
</li>
<li><p>进入 <code>ios</code> 文件夹后, 在终端依次执行<br><code>./compile-ffmpeg.sh clean</code>和<br><code>./compile-ffmpeg.sh all</code>命令,<br>编译 <code>ffmpeg</code>, 也就是<code>README.md</code>中这两步, 如下图:</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-d8e86e2be4ed3960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="编译FFmpeg"><br>编译时间较久, 耐心等待一下.</p>
<h3 id="3、打包IJKMediaFramework-framework框架"><a href="#3、打包IJKMediaFramework-framework框架" class="headerlink" title="3、打包IJKMediaFramework.framework框架"></a>3、打包IJKMediaFramework.framework框架</h3><ul>
<li>首先打开工程<code>IJKMediaPlayer.xcodeproj</code>, 位置如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1803339-607cc84c212faf90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="打开工程"></li>
</ul>
<p>打开后是这样的, 如下图:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-a37b61a3714319b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="要打包的工程"></p>
<ul>
<li>工程打开后设置工程的 <code>scheme</code>, 具体步骤如下图:</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-bbc0adc479cebb69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="scheme"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-daa4498f7e0746d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="选择Release"></p>
<ul>
<li>设置好 <code>scheme</code> 后, 分别选择真机和模拟器进行编译, 编译完成后, 进入 <code>Finder</code>, 如下图:</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-344cda905745ff39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="运行后生成的文件"></p>
<p>进入 <code>Finder</code> 后, 可以看到有真机和模拟器两个版本的编译结果, 如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1803339-3dc9e54521817ae5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="编译结果"></p>
<ul>
<li><p>打开<strong>终端</strong>, 进行合并命令，具体格式为:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lipo -create <span class="string">"真机版本路径"</span> <span class="string">"模拟器版本路径"</span> -output <span class="string">"合并后   的文件路径"</span></div></pre></td></tr></table></figure>
<p>合并后如下图:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-d025e12bf804ee05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="合并后生成的文件"></p>
<p>下面很重要, 需要用合并后的<code>IJKMediaFramework</code>把原来的<code>IJKMediaFramework</code>替换掉, 如下图, 希望你能看懂:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-8d228ab56eb77f43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="用合并生成的文件替换原来的文件"></p>
<p>上图中的 1、2 两步完成后, <strong>绿色</strong>框住的那个<code>IJKMediaFramework.framework</code>文件就是我们需要的框架了, 可以复制出来, 稍后我们需要导入工程使用`.</p>
</li>
</ul>
<h3 id="4、iOS工程中集成ijkplayer"><a href="#4、iOS工程中集成ijkplayer" class="headerlink" title="4、iOS工程中集成ijkplayer"></a>4、iOS工程中集成ijkplayer</h3><p>新建工程, 导入合并后的<code>IJKMediaFramework.framework</code>以及相关依赖框架以及相关依赖框架,如下图:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-391a45a214aae76a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="导入framework及依赖框架"></p>
<p>导入框架后, <code>ViewController.m</code>进行测试, 首先导入<code>IJKMediaFramework.h</code>头文件, <strong>编译</strong>，如果没有错说明集成成功。</p>
<p>至此, <code>ijkplayer</code> 集成完毕!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/20/Mac上搭建基于GitHub的Hexo博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Roy cheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="伊水贝">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/20/Mac上搭建基于GitHub的Hexo博客/" itemprop="url">Mac上搭建基于GitHub的Hexo博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-20T15:02:18+08:00">
                2017-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Technology/" itemprop="url" rel="index">
                    <span itemprop="name">Technology</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/20/Mac上搭建基于GitHub的Hexo博客/" class="leancloud_visitors" data-flag-title="Mac上搭建基于GitHub的Hexo博客">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一直纠结于哪里写博客，曾用过新浪博客，百度空间，LOFTER，OSChina，cnblogs，CSDN，自搭WordPress，都不满意。再后来也弄过Jekyll和Octopress，觉累不爱。</p>
<p>直到多看了一眼hexo，这个逼格极高的程序猿写作方式，我喜欢。就连hexo的发音都像是 <strong>黑客哦</strong> ！如果你跟我一样纠结哪里写博，那就来到GitHub吧，让我们一起hexo！</p>
<blockquote>
<ul>
<li>如果你对默认配置满意，只需几个命令便可秒搭一个hexo。</li>
<li>如果你跟我一样喜欢折腾下，30分钟也足够个性化。</li>
<li>如果你过于喜欢折腾，可以折腾个把星期，尽情的玩。</li>
</ul>
</blockquote>
<p>搭建过程你或许觉得有那么点小繁琐，但一旦搭建完成，写文章是极简单，极舒服的。</p>
<p>只需要几个简单命令，你就可以完成一切。</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo n #写文章</div><div class="line">hexo g #生成</div><div class="line">hexo d #部署 # 可与hexo g合并为 hexo d -g</div></pre></td></tr></table></figure>
<p>下面逐步介绍，进入正题。</p>
<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p>用来生成静态页面。<br>移步<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a>官网，下载安装即可。</p>
<h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p>用来将本地Hexo内容提交到Github上。Xcode自带Git，这里不再赘述。<br>如果没有Xcode可以参考<a href="https://hexo.io/docs/#Installation" target="_blank" rel="external">Hexo官网</a>上的安装方法。</p>
<h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><blockquote>
<p>GitHub账号和GitHub Pages 一般都应该有吧，已有的请自动无视这一部分</p>
</blockquote>
<ul>
<li>注册<a href="https://github.com/join?source=header-home" target="_blank" rel="external">GitHub</a></li>
<li><p>建立与你用户ID对应的仓库<br>  <img src="http://static.zybuluo.com/rabbielulu/1rqdxjkksmvk47y50853ibdt/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png" alt="Repository"></p>
</li>
<li><p>添加SSH公钥到『Account settings -&gt; SSH Keys -&gt; Add SSH Key』</p>
<ul>
<li><p>首先终端设置你的用户名密码：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config --global user.email <span class="string">"你的邮箱"</span></div><div class="line">git config --global user.name <span class="string">"你的用户id"</span></div></pre></td></tr></table></figure>
</li>
<li><p>生成密钥，输入完一路回车，生成publicKey</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C <span class="string">"你的邮箱"</span></div></pre></td></tr></table></figure>
</li>
<li><p>使用以下命令打开密钥,并拷贝红色部分</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/.ssh	     <span class="comment">#找到文件夹.ssh	</span></div><div class="line">cat id_rsa.pub   <span class="comment">#查看密钥</span></div></pre></td></tr></table></figure>
<p>  <img src="http://upload-images.jianshu.io/upload_images/1306128-dd3f4f7af099c89d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="copy this"></p>
</li>
<li><p>在github上添加ssh密钥，登录之后，点击右上角的头像里面的<code>setting</code>，然后左边栏中点击<code>SSH and GPG keys</code>，然后是<code>New SSH key</code>，添加进去即可</p>
<p>  <img src="http://upload-images.jianshu.io/upload_images/1306128-6b8a423076540bca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="copy ssh">    </p>
</li>
<li><p>验证是否连接成功</p>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">ssh</span> <span class="selector-tag">git</span>@<span class="keyword">github</span>.<span class="keyword">com</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>当Node.js和Git都安装好后就可以正式安装Hexo了，终端执行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo npm install -g hexo</span></div></pre></td></tr></table></figure>
<p>输入管理员密码（Mac登录密码）即开始安装 (<code>sudo</code>:linux系统管理指令 <code>-g</code>:全局安装)</p>
<blockquote>
<p>注意坑一：<a href="https://hexo.io/docs" target="_blank" rel="external">Hexo官网</a>上的安装命令是<code>$ npm install -g hexo-cli</code>，安装时不要忘记前面加上<code>sudo</code>，否则会因为权限问题报错。</p>
</blockquote>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>终端cd到一个你选定的目录，执行<code>hexo init</code>命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo init blog</span></div></pre></td></tr></table></figure>
<p><code>blog</code>是你建立的文件夹名称。cd到<code>blog</code>文件夹下，执行如下命令，安装npm：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install</span></div></pre></td></tr></table></figure>
<p>执行如下命令，开启hexo服务器：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo s</span></div></pre></td></tr></table></figure>
<p>此时，浏览器中打开网址<a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a>预览本地页面。</p>
<blockquote>
<p>本地设置好后，开始关联GitHub</p>
</blockquote>
<h3 id="关联GibHub"><a href="#关联GibHub" class="headerlink" title="关联GibHub"></a>关联GibHub</h3><p>终端cd到<code>blog</code>文件夹下，<code>vim</code>打开<code>_config.yml</code>，命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> vim _config.yml</span></div></pre></td></tr></table></figure>
<p>打开后往下滑到最后，修改成下边的样子：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">deploy</span>:</div><div class="line">  <span class="attribute">type</span>: git</div><div class="line">  <span class="attribute">repository</span>: <span class="attribute">https</span>:<span class="comment">//github.com/你的用户名/你的用户名.github.io.git</span></div><div class="line">  <span class="attribute">branch</span>: master</div></pre></td></tr></table></figure>
<blockquote>
<p>注意坑二：在配置所有的_config.yml文件时（包括theme中的），在所有的冒号:后边都要加一个空格，否则执行hexo命令会报错，切记 切记</p>
</blockquote>
<p>在<code>blog</code>文件夹目录下执行生成静态页面命令：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo <span class="keyword">generate</span>		或者：hexo g</div></pre></td></tr></table></figure>
<blockquote>
<p>此时若出现如下报错：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">ERROR </span>Local hexo not found in ~/blog</div><div class="line"><span class="keyword">ERROR </span>Try runing: 'npm install hexo --save'</div></pre></td></tr></table></figure>
<p>则执行命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> hexo <span class="comment">--save</span></div></pre></td></tr></table></figure>
</blockquote>
<p>再执行配置命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo deploy			或者：hexo d</span></div></pre></td></tr></table></figure>
<blockquote>
<p>注意坑三：若执行命令<code>hexo deploy</code>仍然报错：无法连接git或找不到git，则执行如下命令：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install hexo-deployer-git --save</span></div></pre></td></tr></table></figure>
<p>再次执行<code>hexo generate</code>和<code>hexo deploy</code>命令。</p>
<h3 id="发布文章"><a href="#发布文章" class="headerlink" title="发布文章"></a>发布文章</h3><p>终端cd到<code>blog</code>文件夹下，执行如下命令新建文章：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo new <span class="string">"postName"</span></span></div></pre></td></tr></table></figure>
<p>名为<code>postName.md</code>的文件会建在目录<code>/blog/source/_posts</code>下，postName是文件名，为方便链接不建议掺杂汉字。你当然可以用<code>vim</code>来编辑文章。我在用<code>MacDown</code>编辑器，支持预览，简单高效！</p>
<p>文章编辑完成后，终端<code>cd</code>到<code>blog</code>文件夹下，执行如下命令来发布：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo <span class="keyword">generate</span>			<span class="comment">//生成静态页面</span></div><div class="line">hexo deploy			<span class="comment">//将文章部署到Github</span></div></pre></td></tr></table></figure>
<p>至此，<code>Mac</code>上搭建基于<code>Github</code>的<code>Hexo</code>博客就完成了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.jpg"
              alt="Roy cheng" />
          
            <p class="site-author-name" itemprop="name">Roy cheng</p>
            <p class="site-description motion-element" itemprop="description">点点滴滴，记录累积！</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 &mdash; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Roy cheng</span>

  
</div>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v="></script>
<script type="text/javascript" src="/js/src/post-details.js?v="></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script>



  


  




	





  





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("YRs7S6BIOd98ItwAswx4jjci-gzGzoHsz", "hFS4ICOPOcV0Qgf1Hw8t9SfO");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
